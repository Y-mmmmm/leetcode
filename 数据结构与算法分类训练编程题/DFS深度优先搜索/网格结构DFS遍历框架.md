## ç½‘æ ¼ç»“æ„DFSéå†æ¡†æ¶

ç½‘æ ¼/çŸ©é˜µå±äºç‰¹æ®Šçš„å›¾

```java
void dfs(int[][] grid, int r, int c) {
    // åˆ¤æ–­ base case
    if (!inArea(grid, r, c)) {
        return;
    }
    // å¦‚æœè¿™ä¸ªæ ¼å­ä¸æ˜¯å²›å±¿ï¼Œç›´æ¥è¿”å›
    if (grid[r][c] != 1) {
        return;
    }
    grid[r][c] = 2; // å°†æ ¼å­æ ‡è®°ä¸ºã€Œå·²éå†è¿‡ã€
    
    // è®¿é—®ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªç›¸é‚»ç»“ç‚¹
    dfs(grid, r - 1, c);
    dfs(grid, r + 1, c);
    dfs(grid, r, c - 1);
    dfs(grid, r, c + 1);
}

// åˆ¤æ–­åæ ‡ (r, c) æ˜¯å¦åœ¨ç½‘æ ¼ä¸­
boolean inArea(int[][] grid, int r, int c) {
    return 0 <= r && r < grid.length 
         && 0 <= c && c < grid[0].length;
}
```



## å²›å±¿é—®é¢˜



**å²›å±¿é—®é¢˜ æ›¿æ¢**

**é¢˜ç›®æ›¿æ¢ï¼š**å‡è®¾ä½ æ‹¥æœ‰ä¸€ä¸ªåªèƒ½ä¸Šä¸‹å·¦å³è¡Œèµ°æœºå™¨äººï¼Œå’Œä¸€å¼ æœ‰ç«‹ç€è®¸å¤šæ——å­ï¼ˆ1ï¼‰çš„åœ°å›¾ï¼ˆxè½´å‘å³ğŸ‘‰ä¸ºæ­£ï¼Œyè½´ğŸ‘‡ä¸ºæ­£ï¼‰ï¼Œä½ éœ€è¦è°ƒæ•´å‡ æ¬¡æœºå™¨äººçš„ä½ç½®å°†æ——å­å…¨éƒ½æ¨å€’ï¼ˆ0ï¼‰ã€‚

åœ¨ LeetCode ä¸­ï¼Œã€Œå²›å±¿é—®é¢˜ã€æ˜¯ä¸€ä¸ªç³»åˆ—ç³»åˆ—é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

    L200. å²›å±¿æ•°é‡ ï¼ˆEasyï¼‰
    463. å²›å±¿çš„å‘¨é•¿ ï¼ˆEasyï¼‰
    695. å²›å±¿çš„æœ€å¤§é¢ç§¯ ï¼ˆMediumï¼‰
    827. æœ€å¤§äººå·¥å²› ï¼ˆHardï¼‰

æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰é—®é¢˜é€šå¸¸æ˜¯åœ¨æ ‘æˆ–è€…å›¾ç»“æ„ä¸Šè¿›è¡Œçš„ã€‚è€Œæˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„ DFS é—®é¢˜ï¼Œæ˜¯åœ¨ä¸€ç§ã€Œç½‘æ ¼ã€ç»“æ„ä¸­è¿›è¡Œçš„ã€‚å²›å±¿é—®é¢˜æ˜¯è¿™ç±»ç½‘æ ¼ DFS é—®é¢˜çš„å…¸å‹ä»£è¡¨ã€‚ç½‘æ ¼ç»“æ„éå†èµ·æ¥è¦æ¯”äºŒå‰æ ‘å¤æ‚ä¸€äº›ï¼Œå¦‚æœæ²¡æœ‰æŒæ¡ä¸€å®šçš„æ–¹æ³•ï¼ŒDFS ä»£ç å®¹æ˜“å†™å¾—å†—é•¿ç¹æ‚ã€‚

æœ¬æ–‡å°†ä»¥å²›å±¿é—®é¢˜ä¸ºä¾‹ï¼Œå±•ç¤ºç½‘æ ¼ç±»é—®é¢˜ DFS é€šç”¨æ€è·¯ï¼Œä»¥åŠå¦‚ä½•è®©ä»£ç å˜å¾—ç®€æ´ã€‚

#### ç½‘æ ¼ç±»é—®é¢˜çš„ DFS éå†æ–¹æ³•

##### ç½‘æ ¼é—®é¢˜çš„åŸºæœ¬æ¦‚å¿µ

æˆ‘ä»¬é¦–å…ˆæ˜ç¡®ä¸€ä¸‹å²›å±¿é—®é¢˜ä¸­çš„ç½‘æ ¼ç»“æ„æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬åé¢çš„è®¨è®ºã€‚

ç½‘æ ¼é—®é¢˜æ˜¯ç”± mÃ—n ä¸ªå°æ–¹æ ¼ç»„æˆä¸€ä¸ªç½‘æ ¼ï¼Œæ¯ä¸ªå°æ–¹æ ¼ä¸å…¶ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹æ ¼è®¤ä¸ºæ˜¯ç›¸é‚»çš„ï¼Œè¦åœ¨è¿™æ ·çš„ç½‘æ ¼ä¸Šè¿›è¡ŒæŸç§æœç´¢ã€‚

å²›å±¿é—®é¢˜æ˜¯ä¸€ç±»å…¸å‹çš„ç½‘æ ¼é—®é¢˜ã€‚æ¯ä¸ªæ ¼å­ä¸­çš„æ•°å­—å¯èƒ½æ˜¯ 0 æˆ–è€… 1ã€‚æˆ‘ä»¬æŠŠæ•°å­—ä¸º 0 çš„æ ¼å­çœ‹æˆæµ·æ´‹æ ¼å­ï¼Œæ•°å­—ä¸º 1 çš„æ ¼å­çœ‹æˆé™†åœ°æ ¼å­ï¼Œè¿™æ ·ç›¸é‚»çš„é™†åœ°æ ¼å­å°±è¿æ¥æˆä¸€ä¸ªå²›å±¿ã€‚

![å²›å±¿é—®é¢˜ç¤ºä¾‹](https://pic.leetcode-cn.com/c36f9ee4aa60007f02ff4298bc355fd6160aa2b0d628c3607c9281ce864b75a2.jpg)

åœ¨è¿™æ ·ä¸€ä¸ªè®¾å®šä¸‹ï¼Œå°±å‡ºç°äº†å„ç§å²›å±¿é—®é¢˜çš„å˜ç§ï¼ŒåŒ…æ‹¬å²›å±¿çš„æ•°é‡ã€é¢ç§¯ã€å‘¨é•¿ç­‰ã€‚ä¸è¿‡è¿™äº›é—®é¢˜ï¼ŒåŸºæœ¬éƒ½å¯ä»¥ç”¨ DFS éå†æ¥è§£å†³ã€‚

##### DFS çš„åŸºæœ¬ç»“æ„

ç½‘æ ¼ç»“æ„è¦æ¯”äºŒå‰æ ‘ç»“æ„ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå®ƒå…¶å®æ˜¯ä¸€ç§ç®€åŒ–ç‰ˆçš„å›¾ç»“æ„ã€‚è¦å†™å¥½ç½‘æ ¼ä¸Šçš„ DFS éå†ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç†è§£äºŒå‰æ ‘ä¸Šçš„ DFS éå†æ–¹æ³•ï¼Œå†ç±»æ¯”å†™å‡ºç½‘æ ¼ç»“æ„ä¸Šçš„ DFS éå†ã€‚æˆ‘ä»¬å†™çš„äºŒå‰æ ‘ DFS éå†ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š

```c
void traverse(TreeNode root) {
    // åˆ¤æ–­ base case
    if (root == null) {
        return;
    }
    // è®¿é—®ä¸¤ä¸ªç›¸é‚»ç»“ç‚¹ï¼šå·¦å­ç»“ç‚¹ã€å³å­ç»“ç‚¹
    traverse(root.left);
    traverse(root.right);
}
```

å¯ä»¥çœ‹åˆ°ï¼ŒäºŒå‰æ ‘çš„ DFS æœ‰ä¸¤ä¸ªè¦ç´ ï¼šã€Œ**è®¿é—®ç›¸é‚»ç»“ç‚¹**ã€å’Œã€Œ**åˆ¤æ–­ base case**ã€ã€‚

ç¬¬ä¸€ä¸ªè¦ç´ æ˜¯**è®¿é—®ç›¸é‚»ç»“ç‚¹**ã€‚äºŒå‰æ ‘çš„ç›¸é‚»ç»“ç‚¹éå¸¸ç®€å•ï¼Œåªæœ‰å·¦å­ç»“ç‚¹å’Œå³å­ç»“ç‚¹ä¸¤ä¸ªã€‚äºŒå‰æ ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªé€’å½’å®šä¹‰çš„ç»“æ„ï¼šä¸€æ£µäºŒå‰æ ‘ï¼Œå®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘ä¹Ÿæ˜¯ä¸€æ£µäºŒå‰æ ‘ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„ DFS éå†åªéœ€è¦é€’å½’è°ƒç”¨å·¦å­æ ‘å’Œå³å­æ ‘å³å¯ã€‚

ç¬¬äºŒä¸ªè¦ç´ æ˜¯ **åˆ¤æ–­ base case**ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒäºŒå‰æ ‘éå†çš„ base case æ˜¯ root == nullã€‚è¿™æ ·ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­å…¶å®æœ‰ä¸¤ä¸ªå«ä¹‰ï¼šä¸€æ–¹é¢ï¼Œè¿™è¡¨ç¤º root æŒ‡å‘çš„å­æ ‘ä¸ºç©ºï¼Œä¸éœ€è¦å†å¾€ä¸‹éå†äº†ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ root == null çš„æ—¶å€™åŠæ—¶è¿”å›ï¼Œå¯ä»¥è®©åé¢çš„ root.left å’Œ root.right æ“ä½œä¸ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚

å¯¹äºç½‘æ ¼ä¸Šçš„ DFSï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å‚è€ƒäºŒå‰æ ‘çš„ DFSï¼Œå†™å‡ºç½‘æ ¼ DFS çš„ä¸¤ä¸ªè¦ç´ ï¼š

é¦–å…ˆï¼Œç½‘æ ¼ç»“æ„ä¸­çš„æ ¼å­æœ‰å¤šå°‘ç›¸é‚»ç»“ç‚¹ï¼Ÿç­”æ¡ˆæ˜¯ä¸Šä¸‹å·¦å³å››ä¸ªã€‚å¯¹äºæ ¼å­ (r, c) æ¥è¯´ï¼ˆr å’Œ c åˆ†åˆ«ä»£è¡¨è¡Œåæ ‡å’Œåˆ—åæ ‡ï¼‰ï¼Œå››ä¸ªç›¸é‚»çš„æ ¼å­åˆ†åˆ«æ˜¯ (r-1, c)ã€(r+1, c)ã€(r, c-1)ã€(r, c+1)ã€‚æ¢å¥è¯è¯´ï¼Œç½‘æ ¼ç»“æ„æ˜¯ã€Œå››å‰ã€çš„ã€‚

![ç½‘æ ¼ç»“æ„ä¸­å››ä¸ªç›¸é‚»çš„æ ¼å­](https://pic.leetcode-cn.com/63f5803e9452ccecf92fa64f54c887ed0e4e4c3434b9fb246bf2b410e4424555.jpg)

å…¶æ¬¡ï¼Œç½‘æ ¼ DFS ä¸­çš„ base case æ˜¯ä»€ä¹ˆï¼Ÿä»äºŒå‰æ ‘çš„ base case å¯¹åº”è¿‡æ¥ï¼Œåº”è¯¥æ˜¯ç½‘æ ¼ä¸­ä¸éœ€è¦ç»§ç»­éå†ã€grid[r] [c] ä¼šå‡ºç°æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸çš„æ ¼å­ï¼Œä¹Ÿå°±æ˜¯é‚£äº›è¶…å‡ºç½‘æ ¼èŒƒå›´çš„æ ¼å­ã€‚

![ç½‘æ ¼ DFS çš„ base case](https://pic.leetcode-cn.com/5a91ec351bcbe8e631e7e3e44e062794d6e53af95f6a5c778de369365b9d994e.jpg)

è¿™ä¸€ç‚¹ç¨å¾®æœ‰äº›åç›´è§‰ï¼Œåæ ‡ç«Ÿç„¶å¯ä»¥ä¸´æ—¶è¶…å‡ºç½‘æ ¼çš„èŒƒå›´ï¼Ÿè¿™ç§æ–¹æ³•æˆ‘ç§°ä¸ºã€Œ**å…ˆæ±¡æŸ“åæ²»ç†**ã€â€”â€” ç”­ç®¡å½“å‰æ˜¯åœ¨å“ªä¸ªæ ¼å­ï¼Œå…ˆå¾€å››ä¸ªæ–¹å‘èµ°ä¸€æ­¥å†è¯´ï¼Œå¦‚æœå‘ç°èµ°å‡ºäº†ç½‘æ ¼èŒƒå›´å†èµ¶ç´§è¿”å›ã€‚è¿™è·ŸäºŒå‰æ ‘çš„éå†æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œå…ˆé€’å½’è°ƒç”¨ï¼Œå‘ç° root == null å†è¿”å›ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ç½‘æ ¼ DFS éå†çš„æ¡†æ¶ä»£ç ï¼š

```java
void dfs(int[][] grid, int r, int c) {
    // åˆ¤æ–­ base case
    // å¦‚æœåæ ‡ (r, c) è¶…å‡ºäº†ç½‘æ ¼èŒƒå›´ï¼Œç›´æ¥è¿”å›
    if (!inArea(grid, r, c)) {
        return;
    }
    // è®¿é—®ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªç›¸é‚»ç»“ç‚¹
    dfs(grid, r - 1, c);
    dfs(grid, r + 1, c);
    dfs(grid, r, c - 1);
    dfs(grid, r, c + 1);
}

// åˆ¤æ–­åæ ‡ (r, c) æ˜¯å¦åœ¨ç½‘æ ¼ä¸­
boolean inArea(int[][] grid, int r, int c) {
    return 0 <= r && r < grid.length 
        	&& 0 <= c && c < grid[0].length;
}
```



##### é¿å…é‡å¤éå†

ç½‘æ ¼ç»“æ„çš„ DFS ä¸äºŒå‰æ ‘çš„ DFS æœ€å¤§çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œéå†ä¸­å¯èƒ½é‡åˆ°éå†è¿‡çš„ç»“ç‚¹ã€‚è¿™æ˜¯å› ä¸ºï¼Œç½‘æ ¼ç»“æ„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªã€Œå›¾ã€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªæ ¼å­çœ‹æˆå›¾ä¸­çš„ç»“ç‚¹ï¼Œæ¯ä¸ªç»“ç‚¹æœ‰å‘ä¸Šä¸‹å·¦å³çš„å››æ¡è¾¹ã€‚åœ¨å›¾ä¸­éå†æ—¶ï¼Œè‡ªç„¶å¯èƒ½é‡åˆ°é‡å¤éå†ç»“ç‚¹ã€‚

è¿™æ—¶å€™ï¼ŒDFS å¯èƒ½ä¼šä¸åœåœ°ã€Œå…œåœˆå­ã€ï¼Œæ°¸è¿œåœä¸ä¸‹æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![DFS éå†å¯èƒ½ä¼šå…œåœˆå­ï¼ˆåŠ¨å›¾ï¼‰](https://pic.leetcode-cn.com/7fec64afe8ab72c5df17d6a41a9cc9ba3879f58beec54a8791cbf108b9fd0685.gif)

å¦‚ä½•é¿å…è¿™æ ·çš„é‡å¤éå†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ ‡è®°å·²ç»éå†è¿‡çš„æ ¼å­ã€‚ä»¥å²›å±¿é—®é¢˜ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€æœ‰å€¼ä¸º 1 çš„é™†åœ°æ ¼å­ä¸Šåš DFS éå†ã€‚æ¯èµ°è¿‡ä¸€ä¸ªé™†åœ°æ ¼å­ï¼Œå°±æŠŠæ ¼å­çš„å€¼æ”¹ä¸º 2ï¼Œè¿™æ ·å½“æˆ‘ä»¬é‡åˆ° 2 çš„æ—¶å€™ï¼Œå°±çŸ¥é“è¿™æ˜¯éå†è¿‡çš„æ ¼å­äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ ¼å­å¯èƒ½å–ä¸‰ä¸ªå€¼ï¼š

    0 â€”â€” æµ·æ´‹æ ¼å­
    1 â€”â€” é™†åœ°æ ¼å­ï¼ˆæœªéå†è¿‡ï¼‰
    2 â€”â€” é™†åœ°æ ¼å­ï¼ˆå·²éå†è¿‡ï¼‰

æˆ‘ä»¬åœ¨æ¡†æ¶ä»£ç ä¸­åŠ å…¥é¿å…é‡å¤éå†çš„è¯­å¥ï¼š

```java
void dfs(int[][] grid, int r, int c) {
    // åˆ¤æ–­ base case
    if (!inArea(grid, r, c)) {
        return;
    }
    // å¦‚æœè¿™ä¸ªæ ¼å­ä¸æ˜¯å²›å±¿ï¼Œç›´æ¥è¿”å›
    if (grid[r][c] != 1) {
        return;
    }
    grid[r][c] = 2; // å°†æ ¼å­æ ‡è®°ä¸ºã€Œå·²éå†è¿‡ã€
    

    // è®¿é—®ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªç›¸é‚»ç»“ç‚¹
    dfs(grid, r - 1, c);
    dfs(grid, r + 1, c);
    dfs(grid, r, c - 1);
    dfs(grid, r, c + 1);

}

// åˆ¤æ–­åæ ‡ (r, c) æ˜¯å¦åœ¨ç½‘æ ¼ä¸­
boolean inArea(int[][] grid, int r, int c) {
    return 0 <= r && r < grid.length 
        	&& 0 <= c && c < grid[0].length;
}
```

![æ ‡è®°å·²éå†çš„æ ¼å­](https://pic.leetcode-cn.com/20fe202fb5e5fc5048e140c29310c1bcbb17661860d2441e8a3feb1236a2e44d.gif)



è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªå²›å±¿é—®é¢˜ã€ä¹ƒè‡³å„ç§ç½‘æ ¼é—®é¢˜çš„é€šç”¨ DFS éå†æ–¹æ³•ã€‚ä»¥ä¸‹æ‰€è®²çš„å‡ ä¸ªä¾‹é¢˜ï¼Œå…¶å®éƒ½åªéœ€è¦åœ¨ DFS éå†æ¡†æ¶ä¸Šç¨åŠ ä¿®æ”¹è€Œå·²ã€‚

    å°è´´å£«ï¼š
    
    åœ¨ä¸€äº›é¢˜è§£ä¸­ï¼Œå¯èƒ½ä¼šæŠŠã€Œå·²éå†è¿‡çš„é™†åœ°æ ¼å­ã€æ ‡è®°ä¸ºå’Œæµ·æ´‹æ ¼å­ä¸€æ ·çš„ 0ï¼Œç¾å…¶åæ›°ã€Œé™†åœ°æ²‰æ²¡æ–¹æ³•ã€ï¼Œå³éå†å®Œä¸€ä¸ªé™†åœ°æ ¼å­å°±è®©é™†åœ°ã€Œæ²‰æ²¡ã€ä¸ºæµ·æ´‹ã€‚è¿™ç§æ–¹æ³•çœ‹ä¼¼å¾ˆå·§å¦™ï¼Œä½†å®é™…ä¸Šæœ‰å¾ˆå¤§éšæ‚£ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬å°±æ— æ³•åŒºåˆ†ã€Œæµ·æ´‹æ ¼å­ã€å’Œã€Œå·²éå†è¿‡çš„é™†åœ°æ ¼å­ã€äº†ã€‚å¦‚æœé¢˜ç›®æ›´å¤æ‚ä¸€ç‚¹ï¼Œè¿™å¾ˆå®¹æ˜“å‡º bugã€‚

#### å²›å±¿é—®é¢˜çš„è§£æ³•

ç†è§£äº†ç½‘æ ¼ç»“æ„çš„ DFS éå†æ–¹æ³•ä»¥åï¼Œå²›å±¿é—®é¢˜å°±ä¸éš¾è§£å†³äº†ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«çœ‹çœ‹ä¸‰ä¸ªé¢˜ç›®è¯¥å¦‚ä½•ç”¨ DFS éå†æ¥æ±‚è§£ã€‚
**ä¾‹é¢˜ 1ï¼šå²›å±¿çš„æœ€å¤§é¢ç§¯**

LeetCode 695. Max Area of Island ï¼ˆMediumï¼‰

    ç»™å®šä¸€ä¸ªåŒ…å«äº†ä¸€äº› 0 å’Œ 1 çš„éç©ºäºŒç»´æ•°ç»„ gridï¼Œä¸€ä¸ªå²›å±¿æ˜¯ä¸€ç»„ç›¸é‚»çš„ 1ï¼ˆä»£è¡¨é™†åœ°ï¼‰ï¼Œè¿™é‡Œçš„ã€Œç›¸é‚»ã€è¦æ±‚ä¸¤ä¸ª 1 å¿…é¡»åœ¨æ°´å¹³æˆ–è€…ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»ã€‚ä½ å¯ä»¥å‡è®¾ grid çš„å››ä¸ªè¾¹ç¼˜éƒ½è¢« 0ï¼ˆä»£è¡¨æµ·æ´‹ï¼‰åŒ…å›´ç€ã€‚
    
    æ‰¾åˆ°ç»™å®šçš„äºŒç»´æ•°ç»„ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯ã€‚å¦‚æœæ²¡æœ‰å²›å±¿ï¼Œåˆ™è¿”å›é¢ç§¯ä¸º 0 ã€‚

è¿™é“é¢˜ç›®åªéœ€è¦å¯¹æ¯ä¸ªå²›å±¿åš DFS éå†ï¼Œæ±‚å‡ºæ¯ä¸ªå²›å±¿çš„é¢ç§¯å°±å¯ä»¥äº†ã€‚æ±‚å²›å±¿é¢ç§¯çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼Œæ¯éå†åˆ°ä¸€ä¸ªæ ¼å­ï¼Œå°±æŠŠé¢ç§¯åŠ ä¸€ã€‚

```java
int area(int[][] grid, int r, int c) {  
    return 1 
        + area(grid, r - 1, c)
        + area(grid, r + 1, c)
        + area(grid, r, c - 1)
        + area(grid, r, c + 1);
}
```

æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°çš„å®Œæ•´é¢˜è§£ä»£ç å¦‚ä¸‹ï¼š

```java
public int maxAreaOfIsland(int[][] grid) {
    int res = 0;
    for (int r = 0; r < grid.length; r++) {
        for (int c = 0; c < grid[0].length; c++) {
            if (grid[r][c] == 1) {
                int a = area(grid, r, c);
                res = Math.max(res, a);
            }
        }
    }
    return res;
}

int area(int[][] grid, int r, int c) {
    if (!inArea(grid, r, c)) {
        return 0;
    }
    if (grid[r][c] != 1) {
        return 0;
    }
    grid[r][c] = 2;
    
    return 1 
        + area(grid, r - 1, c)
        + area(grid, r + 1, c)
        + area(grid, r, c - 1)
        + area(grid, r, c + 1);
}

boolean inArea(int[][] grid, int r, int c) {
    return 0 <= r && r < grid.length 
        	&& 0 <= c && c < grid[0].length;
}

```



**ä¾‹é¢˜ 2ï¼šå¡«æµ·é€ é™†é—®é¢˜**

LeetCode 827. Making A Large Island ï¼ˆHardï¼‰

    åœ¨äºŒç»´åœ°å›¾ä¸Šï¼Œ 0 ä»£è¡¨æµ·æ´‹ï¼Œ1ä»£è¡¨é™†åœ°ï¼Œæˆ‘ä»¬æœ€å¤šåªèƒ½å°†ä¸€æ ¼ 0 ï¼ˆæµ·æ´‹ï¼‰å˜æˆ 1 ï¼ˆé™†åœ°ï¼‰ã€‚è¿›è¡Œå¡«æµ·ä¹‹åï¼Œåœ°å›¾ä¸Šæœ€å¤§çš„å²›å±¿é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ

è¿™é“é¢˜æ˜¯å²›å±¿æœ€å¤§é¢ç§¯é—®é¢˜çš„å‡çº§ç‰ˆã€‚ç°åœ¨æˆ‘ä»¬æœ‰å¡«æµ·é€ é™†çš„èƒ½åŠ›ï¼Œå¯ä»¥æŠŠä¸€ä¸ªæµ·æ´‹æ ¼å­å˜æˆé™†åœ°æ ¼å­ï¼Œè¿›è€Œè®©ä¸¤å—å²›å±¿è¿æˆä¸€å—ã€‚é‚£ä¹ˆå¡«æµ·é€ é™†ä¹‹åï¼Œæœ€å¤§å¯èƒ½æ„é€ å‡ºå¤šå¤§çš„å²›å±¿å‘¢ï¼Ÿ

å¤§è‡´çš„æ€è·¯æˆ‘ä»¬ä¸éš¾æƒ³åˆ°ï¼Œæˆ‘ä»¬å…ˆè®¡ç®—å‡ºæ‰€æœ‰å²›å±¿çš„é¢ç§¯ï¼Œåœ¨æ‰€æœ‰çš„æ ¼å­ä¸Šæ ‡è®°å‡ºå²›å±¿çš„é¢ç§¯ã€‚ç„¶åæœç´¢å“ªä¸ªæµ·æ´‹æ ¼å­ç›¸é‚»çš„ä¸¤ä¸ªå²›å±¿é¢ç§¯æœ€å¤§ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­çº¢è‰²æ–¹æ¡†å†…çš„æµ·æ´‹æ ¼å­ï¼Œä¸Šè¾¹ã€å·¦è¾¹éƒ½ä¸å²›å±¿ç›¸é‚»ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºå®ƒå˜æˆé™†åœ°ä¹‹åå¯ä»¥è¿æ¥æˆçš„å²›å±¿é¢ç§¯ä¸º 7+1+2=10ã€‚

![ä¸€ä¸ªæµ·æ´‹æ ¼å­è¿æ¥èµ·ä¸¤ä¸ªå²›å±¿](https://pic.leetcode-cn.com/3a993272977112d82a37676380bf723f3f6b919a20da322e9a5c5afda07fa397.jpg)

ç„¶è€Œï¼Œè¿™ç§åšæ³•å¯èƒ½é‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚å¦‚ä¸‹å›¾ä¸­çº¢è‰²æ–¹æ¡†å†…çš„æµ·æ´‹æ ¼å­ï¼Œå®ƒçš„ä¸Šè¾¹ã€å·¦è¾¹éƒ½ä¸å²›å±¿ç›¸é‚»ï¼Œè¿™æ—¶å€™è¿æ¥æˆçš„å²›å±¿é¢ç§¯éš¾é“æ˜¯ 7+1+7 ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ã€‚è¿™ä¸¤ä¸ª 7 æ¥è‡ªåŒä¸€ä¸ªå²›å±¿ï¼Œæ‰€ä»¥å¡«æµ·é€ é™†ä¹‹åå¾—åˆ°çš„å²›å±¿é¢ç§¯åº”è¯¥åªæœ‰ 7+1=8ã€‚

![ä¸€ä¸ªæµ·æ´‹æ ¼å­ä¸åŒä¸€ä¸ªå²›å±¿æœ‰ä¸¤ä¸ªè¾¹ç›¸é‚»](https://pic.leetcode-cn.com/f519da076eb48fc993c7c71a0fa091b53bc6a1661163549eab60010606ee0e1c.jpg)

å¯ä»¥çœ‹åˆ°ï¼Œè¦è®©ç®—æ³•æ­£ç¡®ï¼Œæˆ‘ä»¬å¾—èƒ½åŒºåˆ†ä¸€ä¸ªæµ·æ´‹æ ¼å­ç›¸é‚»çš„ä¸¤ä¸ª 7 æ˜¯ä¸æ˜¯æ¥è‡ªåŒä¸€ä¸ªå²›å±¿ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨æ–¹æ ¼ä¸­æ ‡è®°å²›å±¿çš„é¢ç§¯ï¼Œè€Œåº”è¯¥æ ‡è®°å²›å±¿çš„ç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰ï¼Œå¦å¤–ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•æ¯ä¸ªå²›å±¿çš„é¢ç§¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘ç°çº¢è‰²æ–¹æ¡†å†…çš„æµ·æ´‹æ ¼å­ï¼Œå®ƒçš„ã€Œä¸¤ä¸ªã€ç›¸é‚»çš„å²›å±¿å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªã€‚

![æ ‡è®°æ¯ä¸ªå²›å±¿çš„ç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰](https://pic.leetcode-cn.com/56ec808215d4ff3014476ef22297522b3731602266f9a069a82daf41001f904c.jpg)

å¯ä»¥çœ‹åˆ°ï¼Œè¿™é“é¢˜å®é™…ä¸Šæ˜¯å¯¹ç½‘æ ¼åšäº†ä¸¤é DFSï¼šç¬¬ä¸€é DFS éå†é™†åœ°æ ¼å­ï¼Œè®¡ç®—æ¯ä¸ªå²›å±¿çš„é¢ç§¯å¹¶æ ‡è®°å²›å±¿ï¼›ç¬¬äºŒé DFS éå†æµ·æ´‹æ ¼å­ï¼Œè§‚å¯Ÿæ¯ä¸ªæµ·æ´‹æ ¼å­ç›¸é‚»çš„é™†åœ°æ ¼å­ã€‚

è¿™é“é¢˜çš„åŸºæœ¬æ€è·¯å°±æ˜¯è¿™æ ·ï¼Œå…·ä½“çš„ä»£ç è¿˜æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼Œä½†å’Œæœ¬æ–‡çš„ä¸»é¢˜å·²ç»è”ç³»ä¸å¤§ã€‚å„ä½å¯ä»¥è‡ªå·±æ€è€ƒä¸€ä¸‹å¦‚ä½•æŠŠä¸Šè¿°æ€è·¯è½¬åŒ–ä¸ºä»£ç ã€‚

**ä¾‹é¢˜ 3ï¼šå²›å±¿çš„å‘¨é•¿**

LeetCode 463. Island Perimeter ï¼ˆEasyï¼‰

    ç»™å®šä¸€ä¸ªåŒ…å« 0 å’Œ 1 çš„äºŒç»´ç½‘æ ¼åœ°å›¾ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé™†åœ°ï¼Œ0 è¡¨ç¤ºæµ·æ´‹ã€‚ç½‘æ ¼ä¸­çš„æ ¼å­æ°´å¹³å’Œå‚ç›´æ–¹å‘ç›¸è¿ï¼ˆå¯¹è§’çº¿æ–¹å‘ä¸ç›¸è¿ï¼‰ã€‚æ•´ä¸ªç½‘æ ¼è¢«æ°´å®Œå…¨åŒ…å›´ï¼Œä½†å…¶ä¸­æ°å¥½æœ‰ä¸€ä¸ªå²›å±¿ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç¤ºé™†åœ°çš„æ ¼å­ç›¸è¿ç»„æˆå²›å±¿ï¼‰ã€‚
    
    å²›å±¿ä¸­æ²¡æœ‰â€œæ¹–â€ï¼ˆâ€œæ¹–â€ æŒ‡æ°´åŸŸåœ¨å²›å±¿å†…éƒ¨ä¸”ä¸å’Œå²›å±¿å‘¨å›´çš„æ°´ç›¸è¿ï¼‰ã€‚æ ¼å­æ˜¯è¾¹é•¿ä¸º 1 çš„æ­£æ–¹å½¢ã€‚è®¡ç®—è¿™ä¸ªå²›å±¿çš„å‘¨é•¿ã€‚


â€‹    

![é¢˜ç›®ç¤ºä¾‹](https://pic.leetcode-cn.com/562d8d63af78af0e3ef2105f065cc96465eec4bf1e8a28b668d6f383f0a1518b.jpg)

å®è¯è¯´ï¼Œè¿™é“é¢˜ç”¨ DFS æ¥è§£å¹¶ä¸æ˜¯æœ€ä¼˜çš„æ–¹æ³•ã€‚å¯¹äºå²›å±¿ï¼Œç›´æ¥ç”¨æ•°å­¦çš„æ–¹æ³•æ±‚å‘¨é•¿ä¼šæ›´å®¹æ˜“ã€‚ä¸è¿‡è¿™é“é¢˜æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç†è§£ DFS éå†è¿‡ç¨‹çš„ä¾‹é¢˜ï¼Œä¸ä¿¡ä½ è·Ÿç€æˆ‘å¾€ä¸‹çœ‹ã€‚

æˆ‘ä»¬å†å›é¡¾ä¸€ä¸‹ ç½‘æ ¼ DFS éå†çš„åŸºæœ¬æ¡†æ¶ï¼š

```java
void dfs(int[][] grid, int r, int c) {
    // åˆ¤æ–­ base case
    if (!inArea(grid, r, c)) {
        return;
    }
    // å¦‚æœè¿™ä¸ªæ ¼å­ä¸æ˜¯å²›å±¿ï¼Œç›´æ¥è¿”å›
    if (grid[r][c] != 1) {
        return;
    }
    grid[r][c] = 2; // å°†æ ¼å­æ ‡è®°ä¸ºã€Œå·²éå†è¿‡ã€
    
    // è®¿é—®ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªç›¸é‚»ç»“ç‚¹
    dfs(grid, r - 1, c);
    dfs(grid, r + 1, c);
    dfs(grid, r, c - 1);
    dfs(grid, r, c + 1);
}

// åˆ¤æ–­åæ ‡ (r, c) æ˜¯å¦åœ¨ç½‘æ ¼ä¸­
boolean inArea(int[][] grid, int r, int c) {
    return 0 <= r && r < grid.length 
        	&& 0 <= c && c < grid[0].length;
}

```



å¯ä»¥çœ‹åˆ°ï¼Œdfs å‡½æ•°ç›´æ¥è¿”å›æœ‰è¿™å‡ ç§æƒ…å†µï¼š

* !inArea(grid, r, c)ï¼Œå³åæ ‡ (r, c) è¶…å‡ºäº†ç½‘æ ¼çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯æˆ‘æ‰€è¯´çš„ã€Œå…ˆæ±¡æŸ“åæ²»ç†ã€çš„æƒ…
* grid[r] [c] != 1ï¼Œå³å½“å‰æ ¼å­ä¸æ˜¯å²›å±¿æ ¼å­ï¼Œè¿™åˆåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š
  * grid[r] [c] == 0ï¼Œå½“å‰æ ¼å­æ˜¯æµ·æ´‹æ ¼å­
  * grid[r] [c] == 2ï¼Œå½“å‰æ ¼å­æ˜¯å·²éå†çš„é™†åœ°æ ¼å­

é‚£ä¹ˆè¿™äº›å’Œæˆ‘ä»¬å²›å±¿çš„å‘¨é•¿æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå²›å±¿çš„å‘¨é•¿æ˜¯è®¡ç®—å²›å±¿å…¨éƒ¨çš„ã€Œè¾¹ç¼˜ã€ï¼Œè€Œè¿™äº›è¾¹ç¼˜å°±æ˜¯æˆ‘ä»¬åœ¨ DFS éå†ä¸­ï¼Œdfs å‡½æ•°è¿”å›çš„ä½ç½®ã€‚è§‚å¯Ÿé¢˜ç›®ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å²›å±¿çš„å‘¨é•¿ä¸­çš„è¾¹åˆ†ä¸ºä¸¤ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é»„è‰²çš„è¾¹æ˜¯ä¸ç½‘æ ¼è¾¹ç•Œç›¸é‚»çš„å‘¨é•¿ï¼Œè€Œè“è‰²çš„è¾¹æ˜¯ä¸æµ·æ´‹æ ¼å­ç›¸é‚»çš„å‘¨é•¿ã€‚

![å°†å²›å±¿å‘¨é•¿ä¸­çš„è¾¹åˆ†ä¸ºä¸¤ç±»](https://pic.leetcode-cn.com/66d817362c1037ebe7705aacfbc6546e321c2b6a2e4fec96791f47604f546638.jpg)

å½“æˆ‘ä»¬çš„ dfs å‡½æ•°å› ä¸ºã€Œåæ ‡ (r, c) è¶…å‡ºç½‘æ ¼èŒƒå›´ã€è¿”å›çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±ç»è¿‡äº†ä¸€æ¡é»„è‰²çš„è¾¹ï¼›è€Œå½“å‡½æ•°å› ä¸ºã€Œå½“å‰æ ¼å­æ˜¯æµ·æ´‹æ ¼å­ã€è¿”å›çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±ç»è¿‡äº†ä¸€æ¡è“è‰²çš„è¾¹ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠå²›å±¿çš„å‘¨é•¿è·Ÿ DFS éå†è”ç³»èµ·æ¥äº†ï¼Œæˆ‘ä»¬çš„é¢˜è§£ä»£ç ä¹Ÿå‘¼ä¹‹æ¬²å‡ºï¼š

```java
public int islandPerimeter(int[][] grid) {
    for (int r = 0; r < grid.length; r++) {
        for (int c = 0; c < grid[0].length; c++) {
            if (grid[r][c] == 1) {
                // é¢˜ç›®é™åˆ¶åªæœ‰ä¸€ä¸ªå²›å±¿ï¼Œè®¡ç®—ä¸€ä¸ªå³å¯
                return dfs(grid, r, c);
            }
        }
    }
    return 0;
}

int dfs(int[][] grid, int r, int c) {
    // å‡½æ•°å› ä¸ºã€Œåæ ‡ (r, c) è¶…å‡ºç½‘æ ¼èŒƒå›´ã€è¿”å›ï¼Œå¯¹åº”ä¸€æ¡é»„è‰²çš„è¾¹
    if (!inArea(grid, r, c)) {
        return 1;
    }
    // å‡½æ•°å› ä¸ºã€Œå½“å‰æ ¼å­æ˜¯æµ·æ´‹æ ¼å­ã€è¿”å›ï¼Œå¯¹åº”ä¸€æ¡è“è‰²çš„è¾¹
    if (grid[r][c] == 0) {
        return 1;
    }
    // å‡½æ•°å› ä¸ºã€Œå½“å‰æ ¼å­æ˜¯å·²éå†çš„é™†åœ°æ ¼å­ã€è¿”å›ï¼Œå’Œå‘¨é•¿æ²¡å…³ç³»
    if (grid[r][c] != 1) {
        return 0;
    }
    grid[r][c] = 2;
    return dfs(grid, r - 1, c)
        + dfs(grid, r + 1, c)
        + dfs(grid, r, c - 1)
        + dfs(grid, r, c + 1);
}

// åˆ¤æ–­åæ ‡ (r, c) æ˜¯å¦åœ¨ç½‘æ ¼ä¸­
boolean inArea(int[][] grid, int r, int c) {
    return 0 <= r && r < grid.length 
        	&& 0 <= c && c < grid[0].length;
}

```



#### æ€»ç»“

å¯¹æ¯”å®Œä¸‰ä¸ªä¾‹é¢˜çš„é¢˜è§£ä»£ç ï¼Œä½ ä¼šå‘ç°ç½‘æ ¼é—®é¢˜çš„ä»£ç çœŸçš„éƒ½éå¸¸ç›¸ä¼¼ã€‚å…¶å®è¿™ä¸€ç±»é—®é¢˜å±äºã€Œä¼šäº†ä¸éš¾ã€ç±»å‹ã€‚äº†è§£æ ‘ã€å›¾çš„åŸºæœ¬éå†æ–¹æ³•ï¼Œå†å­¦ä¼šä¸€ç‚¹å°æŠ€å·§ï¼ŒæŒæ¡ç½‘æ ¼ DFS éå†å°±ä¸€ç‚¹ä¹Ÿä¸éš¾äº†ã€‚

ä½œè€…ï¼šnettee
é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/number-of-islands/solution/dao-yu-lei-wen-ti-de-tong-yong-jie-fa-dfs-bian-li-/
æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚